# Облать видимости в JS
### Область видимости — это часть программы, в которой мы можем обратиться к переменной, функции или объекту. Этой частью может быть функция, блок или вся программа в целом — то есть мы всегда находимся как минимум в одной области видимости. Области видимости можно представить как коробки, в которые мы кладём переменные. Переменные, которые лежат в одной коробке, могут общаться друг с другом.
###### Области видимости помогают скрывать переменные от нежелательного доступа, управлять побочными эффектами и разбивать код на смысловые блоки.

## Глобальная область видимости
### Глобальная область видимости — это самая внешняя коробка из всех. Когда мы «просто объявляем переменную», вне функций, вне модулей, то эта переменная попадает в глобальную область видимости. 
Переменная в примере сейчас находится в глобальной области видимости. Это значит, что она будет доступна откуда угодно:
###### const a = 42
console.log(a)
// 42

function wrap() {
  const b = a
  // Без проблем, переменная a доступна в этой функции
}

const c = {
  d: a,
  // Хорошо, переменная a доступна и здесь
}

function secondWrap() {
  const e = {
    f: a,
    // И тут ок, переменная a всё ещё доступна
  }
}
JS в браузерах так устроен, что глобальные переменные попадают в объект window. Если очень грубо, то можно сказать, что window в случае браузера — это и есть глобальная область видимости

## Блочная область видимости 
### Блочная область видимости ограничена программным блоком, обозначенным при помощи { и }. Простейший пример такой области — это выражение внутри скобок:
###### const a = 42
console.log(a)
// 42

if (true) {
  const b = 43
  console.log(a)
  // 42
  console.log(b)
  // 43
}

console.log(b)
// ReferenceError: Can't find variable: b

#### Переменная b скрыта внутри области видимости блока внутри скобок и доступна только внутри этого блока, но не снаружи. Скобки могут, однако, не только отделять тело условия. Ими можно обрамлять и другие части кода. Это, например, бывает очень полезно в сложных switch-конструкциях. Например:
###### switch (animalType) {
  case 'dog': {
    const legs = 4
    const species = 'mammal'
    break
  }

  case 'fish': {
    const legs = 0
    const swims = true
    break
  }
}
switch (animalType) {
  case 'dog': {
    const legs = 4
    const species = 'mammal'
    break
  }

  case 'fish': {
    const legs = 0
    const swims = true
    break
  }
}
#### В примере выше в case нам надо выполнить несколько строчек. Удобно обернуть все операции в блок при помощи фигурных скобок — тогда все переменные и операции будут ограничены этим блоком, то есть блочной областью видимости.

## Функциональная область видимости
### Функциональная область видимости — это область видимости в пределах тела функции. Можно сказать, что она ограничена { и } функции.
###### const a = 42
function scoped() {
  const b = 43
}

console.log(a)
// 42
console.log(b)
// Reference error
К переменной b есть доступ только внутри функции scoped.
Функциональная область видимости — очень мощный инструмент для разделения кода. Во-первых, используя её, мы можем не опасаться за «пересечение имён» переменных.
В одной области видимости объявить дважды let или const нельзя:

## «Поднятие» переменных (hoisting) 
### Выше, когда мы экспериментировали с window и глобальными переменными, мы обговорили, что запись:

var hi = 'Hello world!'
console.log(window.hi)
// Hello world!
сработает только с var, но не с let или const. Дело здесь в «поднятии» переменных (hoisting).
